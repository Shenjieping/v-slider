!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).Slider=e()}(this,function(){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(e,t){var n,o=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,n)),o}function s(){var e=this;o(this,s),r(this,"touchStart",function(t){e.resetTouchStatus(),e.startX=t.touches[0].clientX,e.startY=t.touches[0].clientY}),r(this,"touchMove",function(t){t=t.touches[0];e.deltaX=t.clientX-e.startX,e.deltaY=t.clientY-e.startY,e.offsetX=Math.abs(e.deltaX),e.offsetY=Math.abs(e.deltaY)}),r(this,"resetTouchStatus",function(){e.deltaX=0,e.deltaY=0,e.offsetX=0,e.offsetY=0}),this.deltaX=0,this.deltaY=0,this.offsetX=0,this.offsetY=0}function u(t){return"function"==typeof t}return function t(){var i=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};o(this,t),r(this,"initHtml",function(){i.el.innerHTML='\n      <div class="v-slider-bar">\n        <div class="v-slider__button-wrapper">\n          <div class="v-slider__button"></div>\n        </div>\n      </div>\n    '}),r(this,"updateValue",function(t,e){t=i.format(t);var n=i.options.input,o=i.options.change;n&&(u(n)?n.call(i,t):console.warn("input is not a function")),e&&o&&(u(o)?o.call(i,t):console.warn("change is not a function")),i.value=t,i.render()}),r(this,"format",function(t){return Math.round(Math.max(i.min,Math.min(t,i.max))/i.step)*i.step}),r(this,"onClick",function(t){t.stopPropagation();var e=i.el.getBoundingClientRect(),t=t.clientX-e.left,e=e.width,e=+i.min+t/e*i.scope;i.startValue=i.value,i.updateValue(e,!0)}),r(this,"onTouchStart",function(t){i.touchMixin.touchStart(t),i.currentValue=i.value,i.startValue=i.format(i.value),i.dragStatus="start"}),r(this,"onTouchMove",function(t){var e,n=i.options.dragStart;"start"===i.dragStatus&&n&&(u(n)?n():console.warn("dragStart is not a function")),i.el.querySelector(".v-slider-bar").style.transition="none 0s ease 0s",e=!0,"boolean"==typeof(n=t).cancelable&&!n.cancelable||n.preventDefault(),e&&n.stopPropagation(),i.touchMixin.touchMove(t),i.dragStatus="draging";t=i.el.getBoundingClientRect(),t=i.touchMixin.deltaX/t.width*i.scope;i.currentValue=i.startValue+t,i.updateValue(i.currentValue)}),r(this,"onTouchEnd",function(){var t;"draging"===i.dragStatus&&(i.updateValue(i.currentValue,!0),(t=i.options.dragEnd)&&(u(t)?t():console.warn("dragEnd is not a function"))),i.el.querySelector(".v-slider-bar").style.transition=null,i.dragStatus=""}),r(this,"bindTouchEvent",function(t){var e=i.onTouchStart,n=i.onTouchMove,o=i.onTouchEnd;t.addEventListener("touchstart",e),t.addEventListener("touchmove",n),o&&(t.addEventListener("touchend",o),t.addEventListener("touchcancel",o))}),r(this,"calcMainAxis",function(){var t=i.value,e=i.min,n=i.scope;return"".concat(100*(t-e)/n,"%")}),r(this,"calcOffset",function(){i.value,i.min,i.scope;return null}),r(this,"render",function(){var t={width:i.calcMainAxis(),background:i.options.activeColor},e=i.el.querySelector(".v-slider-bar");e.style.width=t.width,e.style.background=t.background}),this.options=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){r(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({min:0,max:100,step:1,value:0},e),this.min=this.options.min,this.max=this.options.max,this.step=this.options.step,this.value=this.options.value,this.el=function(t){if("string"==typeof t&&(t=document.querySelector(t)),("object"===("undefined"==typeof HTMLElement?"undefined":n(HTMLElement))?function(t){return t instanceof HTMLElement}:function(t){return t&&"object"===n(t)&&1===t.nodeType&&"string"==typeof t.nodeName})(t))return t;throw TypeError("el is not define")}(this.options.el),this.dragStatus="",this.scope=this.max-this.min,this.initHtml(),this.updateValue(this.value);e=this.el.querySelector(".v-slider__button-wrapper");this.bindTouchEvent(e),this.touchMixin=new s,this.el.addEventListener("click",this.onClick)}});
